module.exports = function(grunt) {

    var _ = require('underscore'),
        proc = require('child_process');

    // HAML
    grunt.registerMultiTask('hamltron', 'HAML -> HTML', function() {

        var files = grunt.file.expandFiles(this.file.src);

        files.map(function(hamlPath) {
            var re = /\w+(?=\.\w+$)/,
                fileName = hamlPath.match(re),
                task = 'haml -f html5 ' + hamlPath + ' ' + fileName + '.html';
            proc.exec(task, function (error, stdout, stderr) {});
        });

    });

};
